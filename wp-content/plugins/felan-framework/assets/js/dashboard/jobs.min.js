!(function (n) {
  "use strict";
  var a = n(".jobs-dashboard"),
    t = felan_jobs_dashboard_vars.ajax_url,
    i = felan_jobs_dashboard_vars.not_jobs;
  n(document).ready(function () {
    var o, e, s;
    a
      .find(".select-pagination")
      .change(function () {
        n(".select-pagination option:selected").each(function () {
          n(this).val() + " ";
        }),
          n(this).attr("value");
      })
      .trigger("change"),
      a.find("select.search-control").on("change", function () {
        n(".felan-pagination").find('input[name="paged"]').val(1), d();
      }),
      a.find("input.search-control").on("input", function () {
        n(".felan-pagination").find('input[name="paged"]').val(1), d();
      }),
      a.find("input.jobs-search-control").keyup(
        ((o = function () {
          n(".felan-pagination").find('input[name="paged"]').val(1), d();
        }),
        (e = 1e3),
        (s = 0),
        function () {
          var n = this,
            a = arguments;
          clearTimeout(s),
            (s = setTimeout(function () {
              o.apply(n, a);
            }, e || 0));
        })
      ),
      n("body").on("click", ".jobs-control .btn-mark-featured", function (a) {
        a.preventDefault(), d(n(this).attr("jobs-id"), "mark-featured");
      }),
      n("body").on("click", ".jobs-control .btn-show", function (a) {
        a.preventDefault(), d(n(this).attr("jobs-id"), "show");
      }),
      n("body").on("click", ".jobs-control .btn-mark-filled", function (a) {
        a.preventDefault(), d(n(this).attr("jobs-id"), "mark-filled");
      }),
      n("body").on("click", ".jobs-control .btn-pause", function (a) {
        a.preventDefault(), d(n(this).attr("jobs-id"), "pause");
      }),
      n("body").on("click", ".felan-pagination a.page-numbers", function (t) {
        t.preventDefault(),
          n(".felan-pagination li .page-numbers").removeClass("current"),
          n(this).addClass("current");
        var i = n(this).text(),
          o = 1;
        a.find(".felan-pagination").find('input[name="paged"]').val() &&
          (o = n(".felan-pagination").find('input[name="paged"]').val()),
          n(this).hasClass("next") && (i = parseInt(o) + 1),
          n(this).hasClass("prev") && (i = parseInt(o) - 1),
          a.find(".felan-pagination").find('input[name="paged"]').val(i),
          d();
      });
    function d(o = "", e = "") {
      var s,
        d = a.find("#jobs-dashboard").height(),
        c = a.find('input[name="jobs_search"]').val(),
        l = a.find('select[name="jobs_status"]').val(),
        f = a.find('select[name="item_amount"]').val(),
        r = a.find('select[name="jobs_sort_by"]').val();
      (s = n(".felan-pagination").find('input[name="paged"]').val()),
        n.ajax({
          dataType: "json",
          url: t,
          data: {
            action: "felan_filter_jobs_dashboard",
            item_amount: f,
            paged: s,
            jobs_search: c,
            jobs_status: l,
            jobs_sort_by: r,
            item_id: o,
            action_click: e,
          },
          beforeSend: function () {
            a.find(".felan-loading-effect").addClass("loading").fadeIn(),
              a.find("#jobs-dashboard").height(d);
          },
          success: function (t) {
            if (!0 === t.success) {
              var o = a.find(".items-pagination"),
                e = o.find('select[name="item_amount"] option:selected').val(),
                d = t.total_post,
                c = e * s + 1 - e,
                l = e * s;
              d < c && (c = e * (s - 1) + 1),
                d < l && (l = d),
                n(".num-first").text(c),
                n(".num-last").text(l),
                d > e
                  ? (o.closest(".pagination-dashboard").show(),
                    o.find(".num-total").html(t.total_post))
                  : o.closest(".pagination-dashboard").hide(),
                a.find(".pagination").html(t.pagination),
                a.find("#my-jobs tbody").fadeOut("fast", function () {
                  a.find("#my-jobs tbody").html(t.jobs_html),
                    a.find("#my-jobs tbody").fadeIn(300);
                }),
                a.find("#jobs-dashboard").css("height", "auto");
            } else
              a.find("#my-jobs tbody").html(
                '<span class="not-jobs">' + i + "</span>"
              );
            a.find(".felan-loading-effect").removeClass("loading").fadeOut();
          },
        });
    }
    a.find(".select-pagination").attr("data-value", 1);
  });
})(jQuery);
