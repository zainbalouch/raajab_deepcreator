var WALLET=WALLET||{};(function(f){"use strict";var l=felan_my_wallet_vars.ajax_url,o=felan_my_wallet_vars.not_wallet,d=f(".felan-freelancer-withdraw"),i=f("#form-freelancer-withdraw");WALLET={init:function(){this.submit_withdraw();this.my_wallet()},submit_withdraw:function(){f("body").on("click","#btn-submit-withdraw",function(a){a.preventDefault();var n=f(this),t=i.find('select[name="withdraw_payment"]').val(),e=i.find('input[name="withdraw_price"]').val();f.ajax({type:"POST",url:l,dataType:"json",data:{action:"felan_submit_withdraw",withdraw_payment:t,withdraw_price:e},beforeSend:function(){n.find(".btn-loader").html('<i class="fal fa-spinner fa-spin"></i>')},success:function(a){if(a.success==true){location.reload();i.find(".felan-message-error").addClass("true")}i.find(".felan-message-error").text(a.message);n.find(".btn-loader").html('<i class="fas fa-arrow-to-bottom"></i>')}})})},my_wallet:function(){d.find(".select-pagination").change(function(){var a="";f(".select-pagination option:selected").each(function(){a+=f(this).val()+" "});f(this).attr("value")}).trigger("change");d.find("select.search-control").on("change",function(){f(".felan-pagination").find('input[name="paged"]').val(1);e()});d.find("input.search-control").on("input",function(){f(".felan-pagination").find('input[name="paged"]').val(1);e()});function a(t,e){var i=0;return function(){var a=this,n=arguments;clearTimeout(i);i=setTimeout(function(){t.apply(a,n)},e||0)}}d.find("input.service-search-control").keyup(a(function(){f(".felan-pagination").find('input[name="paged"]').val(1);e()},1e3));f("body").on("click",".felan-pagination a.page-numbers",function(a){a.preventDefault();f(".felan-pagination li .page-numbers").removeClass("current");f(this).addClass("current");var n=f(this).text();var t=1;if(d.find(".felan-pagination").find('input[name="paged"]').val()){t=f(".felan-pagination").find('input[name="paged"]').val()}if(f(this).hasClass("next")){n=parseInt(t)+1}if(f(this).hasClass("prev")){n=parseInt(t)-1}d.find(".felan-pagination").find('input[name="paged"]').val(n);e()});var n=1;d.find(".select-pagination").attr("data-value",n);function e(){var s=1;var a=d.find("#my-wallet").height();var n=d.find('select[name="wallet_status"]').val(),t=d.find('select[name="wallet_method"]').val(),e=d.find('select[name="item_amount"]').val(),i=d.find('select[name="wallet_sort_by"]').val();s=f(".felan-pagination").find('input[name="paged"]').val();f.ajax({dataType:"json",url:l,data:{action:"felan_freelancer_wallet_service",item_amount:e,paged:s,wallet_status:n,wallet_method:t,wallet_sort_by:i},beforeSend:function(){d.find(".felan-loading-effect").addClass("loading").fadeIn();d.find("#my-wallet").height(a)},success:function(a){if(a.success===true){var n=d.find(".items-pagination"),t=n.find('select[name="item_amount"] option:selected').val(),e=a.total_post,i=t*s+1-t,l=t*s;if(e<i){i=t*(s-1)+1}if(e<l){l=e}f(".num-first").text(i);f(".num-last").text(l);if(e>t){n.closest(".pagination-dashboard").show();n.find(".num-total").html(a.total_post)}else{n.closest(".pagination-dashboard").hide()}d.find(".pagination").html(a.pagination);d.find("#my-wallet tbody").fadeOut("fast",function(){d.find("#my-wallet tbody").html(a.wallet_html);d.find("#my-wallet tbody").fadeIn(300)});d.find("#my-wallet").css("height","auto")}else{d.find("#my-wallet tbody").html('<span class="not-service">'+o+"</span>")}d.find(".felan-loading-effect").removeClass("loading").fadeOut()}})}}};f(document).ready(function(){WALLET.init()})})(jQuery);