!(function (n) {
  "use strict";
  var a = n(".company-dashboard"),
    i = felan_company_dashboard_vars.ajax_url,
    t = felan_company_dashboard_vars.not_company;
  n(document).ready(function () {
    a
      .find(".select-pagination")
      .change(function () {
        n(".select-pagination option:selected").each(function () {
          n(this).val() + " ";
        }),
          n(this).attr("value");
      })
      .trigger("change"),
      a.find("select.search-control").on("change", function () {
        n(".felan-pagination").find('input[name="paged"]').val(1), e();
      }),
      a.find("input.search-control").on("input", function () {
        n(".felan-pagination").find('input[name="paged"]').val(1), e();
      }),
      n("body").on("click", ".company-control .btn-delete", function (a) {
        a.preventDefault(), e(n(this).attr("company-id"), "delete");
      }),
      n("body").on("click", ".felan-pagination a.page-numbers", function (i) {
        i.preventDefault(),
          a.find(".felan-pagination li .page-numbers").removeClass("current"),
          n(this).addClass("current");
        var t = n(this).text(),
          o = 1;
        n(".felan-pagination").find('input[name="paged"]').val() &&
          (o = n(".felan-pagination").find('input[name="paged"]').val()),
          n(this).hasClass("next") && (t = parseInt(o) + 1),
          n(this).hasClass("prev") && (t = parseInt(o) - 1),
          a.find(".felan-pagination").find('input[name="paged"]').val(t),
          e();
      });
    function e(e = "", o = "") {
      var d,
        c = a.find("#company-dashboard").height(),
        s = a.find('select[name="item_amount"]').val();
      (d = a.find(".felan-pagination").find('input[name="paged"]').val()),
        n.ajax({
          dataType: "json",
          url: i,
          data: {
            action: "felan_filter_company_dashboard",
            item_amount: s,
            paged: d,
            item_id: e,
            action_click: o,
          },
          beforeSend: function () {
            a.find(".felan-loading-effect").addClass("loading").fadeIn(),
              a.find("#company-dashboard").height(c);
          },
          success: function (i) {
            if (!0 === i.success) {
              var e = a.find(".items-pagination"),
                o = e.find('select[name="item_amount"] option:selected').val(),
                c = i.total_post,
                s = o * d + 1 - o,
                p = o * d;
              c < s && (s = o * (d - 1) + 1),
                c < p && (p = c),
                n(".num-first").text(s),
                n(".num-last").text(p),
                c > o
                  ? (e.closest(".pagination-dashboard").show(),
                    e.find(".num-total").html(i.total_post))
                  : e.closest(".pagination-dashboard").hide(),
                a.find(".pagination").html(i.pagination),
                a.find("#my-company tbody").fadeOut("fast", function () {
                  a.find("#my-company tbody").html(i.company_html),
                    a.find("#my-company tbody").fadeIn(300);
                }),
                a.find("#company-dashboard").css("height", "auto");
            } else
              a.find("#my-company tbody").html(
                '<span class="not-company">' + t + "</span>"
              );
            a.find(".felan-loading-effect").removeClass("loading").fadeOut();
          },
        });
    }
    a.find(".select-pagination").attr("data-value", 1);
  });
})(jQuery);
