var SERVICE_REVIEW=SERVICE_REVIEW||{};(function(t){"use strict";SERVICE_REVIEW={init:function(){SERVICE_REVIEW.submit_review()},submit_review:function(){var n=felan_service_review_vars.ajax_url;var a=t(".service-review-details");a.find("input:file").change(function(){t(".fileList span").remove();for(var e=0;e<this.files.length;e++){var a=this.files[e].name;t(".fileList").append("<span>"+a+"</span>")}});a.find(".entry-nav .reply").on("click",function(e){e.preventDefault();t(".author-review").removeClass("active");t(".author-review .form-reply").html("");var a=t(this);var r=t(".duplicate-form-reply").html();var i=a.parents(".author-review").find(".form-reply").data("id");t(".add-new-review").hide();a.parents(".author-review").addClass("active");a.parents(".author-review").find(".form-reply").html(r);a.parents(".author-review").find('.form-reply input[name="comment_id"]').val(i)});t("body").on("click",".form-reply .felan-submit-service-reply",function(e){e.preventDefault();var a=t(this);var r=a.parents("form");var i=r.find("textarea").val();if(i==""){r.find("#message-error").fadeIn()}else{r.find("#message-error").fadeOut();t.ajax({type:"POST",url:n,data:r.serialize(),dataType:"json",beforeSend:function(){a.attr("disabled",true);a.children("i").remove();a.append('<i class="fa-left fal fa-spinner fa-spin large"></i>')},success:function(){window.location.reload()},complete:function(){a.children("i").removeClass("fal fa-spinner fa-spin large");a.children("i").addClass("fa fa-check")}})}});t("body").on("click",".cancel-reply",function(e){e.preventDefault();a.find(".author-review").removeClass("active");a.find(".author-review .form-reply").html("");a.find(".add-new-review").show()});t.validator.setDefaults({debug:true,success:"valid"});t(".reviewForm").validate({rules:{message:{required:true}},messages:{message:{required:"This field is required"}},errorPlacement:function(e,a){if(a.is(":radio")){e.appendTo(a.parents("fieldset"))}else{e.insertAfter(a)}},submitHandler:function(e){var a=t(".reviewForm").find(".felan-submit-service-rating");var r=t(".reviewForm");var i=false;if(window.FormData){i=new FormData(r[0])}t.ajax({type:"POST",url:n,data:i?i:r.serialize(),enctype:"multipart/form-data",dataType:"json",processData:false,contentType:false,beforeSend:function(){a.children("i").remove();a.append('<i class="fa-left fal fa-spinner fa-spin large"></i>')},success:function(e){window.location.reload()},complete:function(){a.children("i").removeClass("fal fa-spinner fa-spin large");a.children("i").addClass("fa fa-check")}})}})}};t(document).ready(SERVICE_REVIEW.init())})(jQuery);