(function(U){"use strict";var V=felan_submit_vars.ajax_url,W=felan_submit_vars.service_dashboard,X=U("#submit_service_form"),d=X.data("titleerror"),u=X.data("deserror"),v=X.data("languageerror"),e=X.data("priceerror"),_=X.data("deliverytimeerror"),l=X.data("revisionserror"),m=X.data("caterror");U(document).ready(function(){var e=X.find(".felan-addons-warpper > .row:first-child");e.find(".group-title i").removeClass("delete-group");X.on("click","i.delete-group",function(){var e=U(this).closest(".group-title").closest(".row");var i=e.siblings(".row");var r=e.siblings("template");e.remove();U.each(i,function e(i){U(this).find(".group-title h6 span").text(i+1)});r.data("size",i.size())});X.find(".btn-more.service-fields").on("click",function(){var e=U(this).siblings("template");var i=U(e.html().trim());var r=U(this).closest(".felan-addons-warpper").find(".row");var s=U(this).closest(".felan-addons-warpper").find(".felan-addons-inner");var n=parseInt(r.length)+1;i.find(".group-title h6 span").text(n);s.append(i);e.data("size",n)});X.on("click",".group-title",function(){if(!U(this).hasClass("up")){U(this).addClass("up")}else{U(this).removeClass("up")}});X.find(".btn-more.package-fields").on("click",function(){var e=U(this).siblings("template");var i=U(e.html().trim());var r=U(this).closest(".table-responsive").find("tbody");const s=parseInt(X.find('select[name="service_quantity"]').val());if(s==1){i.find(".field-standard").hide();i.find(".field-premium").hide()}else if(s==2){i.find(".field-premium").hide()}r.append(i)});X.on("click",".table-package i.delete-group",function(){U(this).closest("tr").remove()});const i=X.find("tr.number-revisions .felan-select2");function r(e,i){if(i=="custom"){e.closest(".filed-revisions").find('input[type="number"]').show()}else{e.closest(".filed-revisions").find('input[type="number"]').hide()}}i.on("change",function(){r(U(this),U(this).val())});X.find(".number-revisions .filed-revisions").each(function(){const e=U(this).find(".felan-select2");const i=e.val();r(e,i)});U.validator.setDefaults({ignore:":hidden:not(select)"});X.validate({ignore:[],rules:{service_title:{required:true},service_categories:{required:true},service_des:{required:true},service_language:{required:true},service_basic_revisions:{required:true},service_basic_price:{required:true},service_standard_price:{required:true},service_premium_price:{required:true}},messages:{service_title:d,service_des:u,service_language:v,service_categories:m,service_basic_price:"Basic price is required.",service_standard_price:"Standard price is required.",service_premium_price:"Premium price is required.",service_basic_time:_,service_standard_time:_,service_premium_time:_,service_basic_revisions:l,service_standard_revisions:l,service_premium_revisions:l},submitHandler:function(e){c()},errorPlacement:function(e,i){e.insertAfter(i)},invalidHandler:function(){if(U(".error:visible").length>0){U("html, body").animate({scrollTop:U(".error:visible").offset().top-100},500)}}});const s=X.find('select[name="service_quantity"]');const n=X.find('select[name="service_quantity"]').val();function a(e){if(e==1){X.find(".field-standard").hide();X.find(".field-premium").hide()}if(e==2){X.find(".field-standard").show();X.find(".field-premium").hide()}if(e==3){X.find(".field-standard").show();X.find(".field-premium").show()}}function t(e){const i=X.find('input[name="service_basic_price"]');const r=X.find('input[name="service_standard_price"]');const s=X.find('input[name="service_premium_price"]');if(e===1&&i.length){i.rules("add",{required:true,messages:{required:"Basic price is required."}});r.rules("remove");s.rules("remove")}if(e===2&&r.length){i.rules("add",{required:true,messages:{required:"Basic price is required."}});r.rules("add",{required:true,messages:{required:"Standard price is required."}});s.rules("remove")}if(e===3&&s.length){i.rules("add",{required:true,messages:{required:"Basic price is required."}});r.rules("add",{required:true,messages:{required:"Standard price is required."}});s.rules("add",{required:true,messages:{required:"Premium price is required."}})}if(X.data("validator")){X.valid()}}s.change(function(){const e=parseInt(U(this).val());a(e);t(e)});a(n);function c(){var e=X.find('input[name="service_form"]').val(),i=X.find('input[name="service_id"]').val(),r=X.find('input[name="service_title"]').val(),s=X.find('select[name="service_categories"]').val(),n=X.find('select[name="service_skills"]').val(),a=tinymce.get("service_des").getContent(),t=X.find('select[name="service_language"]').val(),c=X.find('select[name="service_location"]').val(),d=X.find('input[name="felan_map_address"]').val(),u=X.find('input[name="felan_map_location"]').val(),v=X.find('input[name="felan_latitude"]').val(),_=X.find('input[name="felan_longtitude"]').val(),l=X.find('input[name="service_thumbnail_url"]').val(),m=X.find('input[name="service_thumbnail_id"]').val(),o=X.find('input[name="felan_gallery_ids[]"]').map(function(){return U(this).val()}).get(),f=X.find('input[name="service_video_url"]').val(),p=X.find('select[name="service_currency"]').val(),g=X.find('select[name="service_time"]').val(),h=X.find('select[name="service_quantity"]').val(),b=X.find('textarea[name="service_basic_des"]').val(),q=X.find('textarea[name="service_standard_des"]').val(),k=X.find('textarea[name="service_premium_des"]').val(),y=X.find('input[name="service_basic_price"]').val(),w=X.find('input[name="service_standard_price"]').val(),x=X.find('input[name="service_premium_price"]').val(),j=X.find('input[name="service_basic_time"]').val(),C=X.find('input[name="service_standard_time"]').val(),B=X.find('input[name="service_premium_time"]').val(),I=X.find('select[name="service_basic_revisions"]').val(),S=X.find('select[name="service_standard_revisions"]').val(),z=X.find('select[name="service_premium_revisions"]').val(),P=X.find('input[name="service_basic_number_revisions"]').val(),H=X.find('input[name="service_standard_number_revisions"]').val(),T=X.find('input[name="service_premium_number_revisions"]').val(),A=X.find('input[name="service_package_title[]"]').map(function(){return U(this).val()}).get(),D=X.find('input[name="service_package_basic[]"]').map(function(){return this.checked?"basic":"off"}).get(),O=X.find('input[name="service_package_standard[]"]').map(function(){return this.checked?"standard":"off"}).get(),Q=X.find('input[name="service_package_premium[]"]').map(function(){return this.checked?"premium":"off"}).get(),E=X.find('input[name="service_custom_title[]"]').map(function(){return U(this).val()}).get(),F=X.find('input[name="service_custom_basic[]"]').map(function(){return this.checked?"basic":"off"}).get(),G=X.find('input[name="service_custom_standard[]"]').map(function(){return this.checked?"standard":"off"}).get(),J=X.find('input[name="service_custom_premium[]"]').map(function(){return this.checked?"premium":"off"}).get(),K=X.find('input[name="service_addons_title[]"]').map(function(){return U(this).val()}).get(),L=X.find('input[name="service_addons_price[]"]').map(function(){return U(this).val()}).get(),M=X.find('input[name="service_addons_time[]"]').map(function(){return U(this).val()}).get(),N=X.find('input[name="service_faq_title[]"]').map(function(){return U(this).val()}).get(),R=X.find('textarea[name="service_faq_description[]"]').map(function(){return U(this).val()}).get();U.ajax({dataType:"json",url:V,data:{action:"service_submit_ajax",service_form:e,service_id:i,service_title:r,service_categories:s,service_skills:n,service_des:a,service_language:t,service_currency:p,service_time:g,service_quantity:h,service_basic_des:b,service_standard_des:q,service_premium_des:k,service_basic_price:y,service_standard_price:w,service_premium_price:x,service_basic_time:j,service_standard_time:C,service_premium_time:B,service_basic_revisions:I,service_standard_revisions:S,service_premium_revisions:z,service_basic_number_revisions:P,service_standard_number_revisions:H,service_premium_number_revisions:T,service_location:c,service_map_address:d,service_map_location:u,service_latitude:v,service_longtitude:_,service_thumbnail_url:l,service_thumbnail_id:m,felan_gallery_ids:o,service_video_url:f,service_package_title:A,service_package_basic:D,service_package_standard:O,service_package_premium:Q,service_custom_title:E,service_custom_basic:F,service_custom_standard:G,service_custom_premium:J,service_addons_title:K,service_addons_price:L,service_addons_time:M,service_faq_title:N,service_faq_description:R},beforeSend:function(){U(".btn-submit-service .btn-loading").fadeIn()},success:function(e){U(".btn-submit-service .btn-loading").fadeOut();if(e.success===true){window.location.href=W}}})}})})(jQuery);