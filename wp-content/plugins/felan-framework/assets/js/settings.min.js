(function (o) {
  "use strict";
  var c = felan_settings_vars.ajax_url,
    l = felan_settings_vars.site_url;
  o(document).ready(function () {
    o(".form-settings").validate({
      ignore: ":hidden",
      errorElement: "span",
      rules: {
        user_firstname: { required: true },
        user_lastname: { required: true },
        user_email: { required: true },
        user_mobile_number: { required: true },
      },
      messages: {
        user_firstname: "",
        user_lastname: "",
        user_email: "",
        user_mobile_number: "",
      },
    });
    o("#felan_update_profile").on("click", function () {
      var a = o(this);
      var e = a.parents("form");
      var i = a.text();
      if (e.valid()) {
        o.ajax({
          type: "POST",
          url: c,
          dataType: "json",
          data: {
            action: "felan_update_profile_ajax",
            user_firstname: o("#user_firstname").val(),
            user_lastname: o("#user_lastname").val(),
            user_des: o("#user_des").val(),
            user_email: o("#user_email").val(),
            phone_code: o(".prefix-code").val(),
            author_mobile_number: o("#author_mobile_number").val(),
            user_image_url: o("#author_avatar_image_url").val(),
            user_image_id: o("#author_avatar_image_id").val(),
            felan_security_update_profile: o(
              "#felan_security_update_profile"
            ).val(),
          },
          beforeSend: function () {
            a.find(".btn-loading").fadeIn();
          },
          success: function (e) {
            a.find(".btn-loading").fadeOut();
            if (e.success) {
              location.reload();
            }
          },
          error: function () {
            a.find(".btn-loading").fadeOut();
          },
        });
      }
    });
    o(".block-search.search-input").on("click", ".icon-clear", function (e) {
      e.preventDefault();
      o(this).closest(".search-input").find(".input-search").val("");
      o(this).closest(".search-input").removeClass("has-clear");
    });
    o("#felan_change_pass").on("click", function (e) {
      e.preventDefault();
      var a, i, r, s;
      var n = o(this);
      var t = n.parents("form");
      var u = n.text();
      i = o("#oldpass").val();
      r = o("#newpass").val();
      s = o("#confirmpass").val();
      a = o("#felan_security_change_password").val();
      o.ajax({
        type: "POST",
        dataType: "json",
        url: c,
        data: {
          action: "felan_change_password_ajax",
          oldpass: i,
          newpass: r,
          confirmpass: s,
          felan_security_change_password: a,
        },
        beforeSend: function () {
          n.find(".btn-loading").fadeIn();
        },
        success: function (e) {
          if (e.success) {
            window.location.href = l;
          }
          t.find(".message").html(e.message);
          n.find(".btn-loading").fadeOut();
        },
        error: function () {
          n.find(".btn-loading").fadeOut();
        },
      });
    });
  });
})(jQuery);
