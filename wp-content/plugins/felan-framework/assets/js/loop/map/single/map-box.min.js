var MAP_BOX=MAP_BOX||{};(function(e){"use strict";MAP_BOX={init:function(){MAP_BOX.show_map()},show_map:function(){var e=felan_map_box_single_vars.api_key,o=felan_map_box_single_vars.lng,a=felan_map_box_single_vars.lat,t=felan_map_box_single_vars.map_zoom,n=felan_map_box_single_vars.map_style,i=felan_map_box_single_vars.map_marker;var r=jQuery("#mapbox_map");if(r.length>0){if(a!==""&&o!==""){mapboxgl.accessToken=e;var s=new mapboxgl.Map({container:"mapbox_map",style:"mapbox://styles/mapbox/"+n,zoom:t,center:[o,a]});s.addControl(new mapboxgl.NavigationControl);var p={type:"FeatureCollection",features:[{type:"Feature",geometry:{type:"Point",coordinates:[o,a]},properties:{iconSize:[48,48],icon:i}}]};p.features.forEach(function(e,o){e.properties.id=o});s.on("load",function(e){s.addLayer({id:"locations",type:"symbol",source:{type:"geojson",data:p},layout:{"icon-image":"","icon-allow-overlap":true}});l()});if(!("remove"in Element.prototype)){Element.prototype.remove=function(){if(this.parentNode){this.parentNode.removeChild(this)}}}function l(){p.features.forEach(function(e){var o=document.createElement("div");o.id="marker-"+e.properties.id;o.className="marker";o.style.backgroundImage="url("+e.properties.icon+")";o.style.width=e.properties.iconSize[0]+"px";o.style.height=e.properties.iconSize[1]+"px";new mapboxgl.Marker(o,{offset:[0,-50/2]}).setLngLat(e.geometry.coordinates).addTo(s);o.addEventListener("click",function(e){var o=document.getElementsByClassName("active");e.stopPropagation();if(o[0]){o[0].classList.remove("active")}})})}}}}};e(document).ready(MAP_BOX.init())})(jQuery);