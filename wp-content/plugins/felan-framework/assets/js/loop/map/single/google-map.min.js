jQuery(document).ready(function () {
  felan_google_map_single_vars.api_key;
  var e = felan_google_map_single_vars.lng,
    t = felan_google_map_single_vars.lat,
    o = felan_google_map_single_vars.map_zoom,
    n = felan_google_map_single_vars.map_type,
    i = felan_google_map_single_vars.map_style,
    l = felan_google_map_single_vars.map_marker;
  if (null != jQuery("#google_map")) {
    var a,
      s = new google.maps.LatLngBounds();
    if (
      ((a = [
        {
          featureType: "landscape",
          elementType: "labels",
          stylers: [{ visibility: "off" }],
        },
        {
          featureType: "transit",
          elementType: "labels",
          stylers: [{ visibility: "off" }],
        },
        {
          featureType: "poi",
          elementType: "labels",
          stylers: [{ visibility: "off" }],
        },
        {
          featureType: "water",
          elementType: "labels",
          stylers: [{ visibility: "off" }],
        },
        {
          featureType: "road",
          elementType: "labels.icon",
          stylers: [{ visibility: "off" }],
        },
        {
          stylers: [
            { hue: "#00aaff" },
            { saturation: -100 },
            { gamma: 2.15 },
            { lightness: 12 },
          ],
        },
        {
          featureType: "road",
          elementType: "labels.text.fill",
          stylers: [{ visibility: "on" }, { lightness: 24 }],
        },
        {
          featureType: "road",
          elementType: "geometry",
          stylers: [{ lightness: 57 }],
        },
      ]),
      i && (a = JSON.parse(i)),
      "" !== t && "" !== e)
    ) {
      var r,
        g = new google.maps.LatLng(t, e),
        p =
          (Math.max(
            document.documentElement.clientWidth,
            window.innerWidth || 0
          ),
          {
            mapTypeId: n,
            center: g,
            draggable: !0,
            scrollwheel: !0,
            styles: a,
            mapTypeControl: !1,
            streetViewControl: !0,
            rotateControl: !1,
            zoomControl: !0,
            fullscreenControl: !0,
          }),
        m = new google.maps.Map(document.getElementById("google_map"), p);
      s.extend(g), (marker_size = new google.maps.Size(48, 48));
      var d = {
        url: l,
        size: marker_size,
        scaledSize: new google.maps.Size(48, 48),
      };
      r = new google.maps.Marker({
        position: g,
        map: m,
        icon: d,
        animation: google.maps.Animation.DROP,
      });
      var c = new google.maps.InfoWindow({ maxWidth: 370 });
      !(function (e) {
        var t = {},
          o = "",
          n = "";
        navigator.geolocation
          ? navigator.geolocation.getCurrentPosition(
              function (e) {
                e.coords.latitude, e.coords.longitude;
                (o = e.coords.latitude),
                  (n = e.coords.longitude),
                  (t = { lat: parseFloat(o), lng: parseFloat(n) });
              },
              function () {
                l(!0, c, e.getCenter());
              }
            )
          : l(!1, c, e.getCenter());
        const i = document.createElement("div");
        function l(t, o, n) {
          o.setPosition(n),
            o.setContent(
              t
                ? "Error: The Geolocation service failed."
                : "Error: Your browser doesn't support geolocation."
            ),
            o.open(e);
        }
        !(function (e, o) {
          const n = document.createElement("div");
          (n.style.backgroundColor = "#fff"),
            (n.style.border = "2px solid #fff"),
            (n.style.borderRadius = "3px"),
            (n.style.boxShadow = "0 2px 6px rgba(0,0,0,.3)"),
            (n.style.cursor = "pointer"),
            (n.style.width = "48px"),
            (n.style.height = "48px"),
            (n.style.margin = "10px"),
            (n.style.textAlign = "center"),
            (n.title = "My location"),
            e.appendChild(n);
          const i = document.createElement("div");
          (i.style.fontSize = "18px"),
            (i.style.lineHeight = "37px"),
            (i.style.paddingLeft = "5px"),
            (i.style.paddingRight = "5px"),
            (i.innerHTML = "<i class='fas fa-location'></i>"),
            n.appendChild(i),
            n.addEventListener("click", () => {
              o.panTo(t);
            }),
            jQuery(".my-location").on("click", function (e) {
              e.preventDefault(), o.panTo(t);
            });
        })(i, e),
          (i.index = 1),
          e.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(i);
      })(m),
        google.maps.event.addListener(r, "click", function () {
          c.setContent(""), c.open(m, this);
        }),
        m.fitBounds(s);
      var y = google.maps.event.addListener(m, "idle", function (e) {
        this.setZoom(o), google.maps.event.removeListener(y);
      });
    } else document.getElementById("google_map").style.height = "auto";
  }
});
