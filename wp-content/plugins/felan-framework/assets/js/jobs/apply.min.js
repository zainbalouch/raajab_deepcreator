(function (h) {
  "use strict";
  h(document).ready(function () {
    var b = felan_template_vars.ajax_url,
      j = felan_template_vars.apply_saved,
      e = felan_template_vars.not_file,
      a = h(".form-popup-apply");
    a.each(function () {
      var e = h("#" + h(".btn-submit-apply-jobs").attr("id"));
      var g = h(".felan-button-apply." + h(this).attr("id"));
      var y = h("#" + h(this).attr("id"));
      e.on("click", function (e) {
        e.preventDefault();
        var a = h(this),
          n = y.find('input[name="apply_emaill"]').val(),
          r = y.find('textarea[name="apply_message"]').val(),
          t = y.find('input[name="apply_phone"]').val(),
          l = g.data("freelancer_id"),
          i = g.data("jobs_id"),
          c = y.find('input[name="jobs_cv_url"]').val(),
          o = y.find('input[name="type_apply"]').val(),
          s = y.find('select[name="freelancer_categories"]').val(),
          f = y.find('input[name="freelancer_dob"]').val(),
          d = y.find('input[name="freelancer_current_position"]').val(),
          _ = y.find('select[name="freelancer_age"]').val(),
          p = y.find('select[name="freelancer_gender"]').val(),
          u = y.find('select[name="freelancer_languages"]').val(),
          m = y.find('select[name="freelancer_qualification"]').val(),
          v = y.find('select[name="freelancer_yoe"]').val();
        h.ajax({
          type: "POST",
          url: b,
          dataType: "json",
          data: {
            action: "jobs_add_to_apply",
            jobs_id: i,
            freelancer_id: l,
            emaill: n,
            phone: t,
            message: r,
            cv_url: c,
            type_apply: o,
            freelancer_current_position: d,
            freelancer_categories: s,
            freelancer_dob: f,
            freelancer_age: _,
            freelancer_gender: p,
            freelancer_languages: u,
            freelancer_qualification: m,
            freelancer_yoe: v,
          },
          beforeSend: function () {
            a.find(".btn-loading").fadeIn();
          },
          success: function (e) {
            if (e.success == true) {
              y.find(".message_error").addClass("true");
              y.find(".message_error").text(e.message);
              h(".felan-button-apply[data-jobs_id =" + i + "]").html(j);
              location.reload();
            } else {
              h(".message_error").text(e.message);
            }
            a.find(".btn-loading").fadeOut();
          },
        });
      });
    });
  });
})(jQuery);
