(function (O) {
  "use strict";
  var P = O("#submit_company_form"),
    a = P.data("titleerror"),
    i = P.data("deserror"),
    e = P.data("caterror"),
    t = P.data("sizeerror"),
    o = P.data("emailerror");
  var Q = felan_submit_vars.ajax_url,
    S = felan_submit_vars.company_dashboard,
    B = felan_submit_vars.custom_field_company;
  O(document).ready(function () {
    O.validator.setDefaults({ ignore: ":hidden:not(select)" });
    P.validate({
      ignore: [],
      rules: {
        company_title: { required: true },
        company_categories: { required: true },
        company_size: { required: true },
        company_email: { required: true },
        company_des: { required: true },
      },
      messages: {
        company_title: a,
        company_des: i,
        company_categories: e,
        company_size: t,
        company_email: o,
      },
      submitHandler: function (a) {
        n();
      },
      errorPlacement: function (a, n) {
        a.insertAfter(n);
      },
      invalidHandler: function () {
        if (O(".error:visible").length > 0) {
          O("html, body").animate(
            { scrollTop: O(".error:visible").offset().top - 100 },
            500
          );
        }
      },
    });
    function n() {
      var a = P.find('input[name="company_form"]').val(),
        n = P.find('input[name="company_action"]').val(),
        i = P.find('input[name="company_id"]').val(),
        e = P.find('input[name="company_title"]').val(),
        t = P.find('select[name="company_categories"]').val(),
        o = P.find('input[name="company_new_categories"]').val(),
        m = P.find('input[name="company_url"]').val(),
        c = tinymce.get("company_des").getContent(),
        p = P.find('input[name="company_website"]').val(),
        _ = P.find('input[name="company_phone"]').val(),
        l = P.find('select[name="prefix_code"]').val(),
        r = P.find('input[name="company_email"]').val(),
        d = P.find('select[name="company_founded"]').val(),
        u = P.find('select[name="company_size"]').val(),
        y = P.find('input[name="company_twitter"]').val(),
        s = P.find('input[name="company_linkedin"]').val(),
        f = P.find('input[name="company_facebook"]').val(),
        v = P.find('input[name="company_instagram"]').val(),
        b = P.find('input[name="company_social_name[]"]')
          .map(function () {
            return O(this).val();
          })
          .get(),
        g = P.find('input[name="company_social_url[]"]')
          .map(function () {
            return O(this).val();
          })
          .get(),
        h = P.find('select[name="company_location"]').val(),
        w = P.find('input[name="company_new_location"]').val(),
        k = P.find('input[name="felan_map_address"]').val(),
        j = P.find('input[name="felan_map_location"]').val(),
        q = P.find('input[name="felan_latitude"]').val(),
        x = P.find('input[name="felan_longtitude"]').val(),
        z = P.find('input[name="company_avatar_url"]').val(),
        H = P.find('input[name="company_avatar_id"]').val(),
        T = P.find('input[name="company_thumbnail_url"]').val(),
        A = P.find('input[name="company_thumbnail_id"]').val(),
        C = P.find('input[name="felan_gallery_ids[]"]')
          .map(function () {
            return O(this).val();
          })
          .get(),
        D = P.find('input[name="company_video_url"]').val();
      var I = {};
      O("#company-submit-additional").each(function () {
        O.each(B, function (a, n) {
          var i = O(".form-control[name=" + n.id + "]").val();
          if (n.type == "radio") {
            i = O("input[name=" + n.id + "]:checked").val();
          }
          if (n.type == "checkbox_list") {
            var e = [];
            O('input[name="' + n.id + '[]"]:checked').each(function () {
              e.push(O(this).val());
            });
            i = e;
          }
          if (n.type == "image") {
            i = O("input#custom_image_id_" + n.id).val();
          }
          I[n.id] = i;
        });
      });
      O.ajax({
        dataType: "json",
        url: Q,
        data: {
          action: "company_submit_ajax",
          company_form: a,
          company_action: n,
          company_id: i,
          company_title: e,
          company_categories: t,
          company_new_categories: o,
          company_url: m,
          company_des: c,
          company_website: p,
          company_founded: d,
          company_phone: _,
          company_phone_code: l,
          company_email: r,
          company_size: u,
          company_twitter: y,
          company_linkedin: s,
          company_facebook: f,
          company_instagram: v,
          company_social_name: b,
          company_social_url: g,
          company_location: h,
          company_new_location: w,
          company_map_address: k,
          company_map_location: j,
          company_latitude: q,
          company_longtitude: x,
          company_avatar_url: z,
          company_avatar_id: H,
          company_thumbnail_url: T,
          company_thumbnail_id: A,
          felan_gallery_ids: C,
          company_video_url: D,
          custom_field_company: I,
        },
        beforeSend: function () {
          O(".btn-submit-company .btn-loading").fadeIn();
        },
        success: function (a) {
          O(".btn-submit-company .btn-loading").fadeOut();
          if (a.success === true) {
            window.location.href = S;
          }
        },
      });
    }
  });
})(jQuery);
