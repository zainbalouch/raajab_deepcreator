(function(P){"use strict";var F=felan_submit_vars.ajax_url,H=felan_submit_vars.project_dashboard,M=P("#submit_project_form"),s=M.data("titleerror"),d=M.data("deserror"),u=M.data("careererror"),p=M.data("languageerror"),m=M.data("caterror"),A=felan_submit_vars.custom_field_project;P(document).ready(function(){function e(e){var t=e==="fixed";var i=e==="hourly";P("#project_maximum_hours").closest(".form-group").toggle(i);P("#project_value_rate").closest(".form-group").toggle(t);P("#projects_rate").toggle(t)}P("#select-budget-show").change(function(){e(P(this).val())});e(P("#select-budget-show").val());var t=M.find(".felan-addons-warpper > .row:first-child");t.find(".group-title i").removeClass("delete-group");M.on("click","i.delete-group",function(){var e=P(this).closest(".group-title").closest(".row");var t=e.siblings(".row");var i=e.siblings("template");e.remove();P.each(t,function e(t){P(this).find(".group-title h6 span").text(t+1)});i.data("size",t.size())});M.find(".btn-more.project-fields").on("click",function(){var e=P(this).siblings("template");var t=P(e.html().trim());var i=P(this).closest(".felan-addons-warpper").find(".row");var a=P(this).closest(".felan-addons-warpper").find(".felan-addons-inner");var n=parseInt(i.length)+1;t.find(".group-title h6 span").text(n);a.append(t);e.data("size",n)});M.on("click",".group-title",function(){if(!P(this).hasClass("up")){P(this).addClass("up")}else{P(this).removeClass("up")}});M.find(".btn-more.package-fields").on("click",function(){var e=P(this).siblings("template");var t=P(e.html().trim());var i=P(this).closest(".table-responsive").find("tbody");const a=parseInt(M.find('select[name="project_quantity"]').val());if(a==1){t.find(".field-standard").hide();t.find(".field-premium").hide()}else if(a==2){t.find(".field-premium").hide()}i.append(t)});M.on("click",".table-package i.delete-group",function(){P(this).closest("tr").remove()});const i=M.find('select[name="project_quantity"]');const a=M.find('select[name="project_quantity"]').val();function n(e){if(e==1){M.find(".field-standard").hide();M.find(".field-premium").hide()}if(e==2){M.find(".field-standard").show();M.find(".field-premium").hide()}if(e==3){M.find(".field-standard").show();M.find(".field-premium").show()}}i.change(function(){const e=parseInt(P(this).val());n(e)});n(a);const r=M.find("tr.number-revisions .felan-select2");function o(e,t){if(t=="custom"){e.closest(".filed-revisions").find('input[type="number"]').show()}else{e.closest(".filed-revisions").find('input[type="number"]').hide()}}r.on("change",function(){o(P(this),P(this).val())});M.find(".number-revisions .filed-revisions").each(function(){const e=P(this).find(".felan-select2");const t=e.val();o(e,t)});var c;P("#project_budget_minimum, #project_budget_maximum").on("input",function(){clearTimeout(c);c=setTimeout(function(){var e=parseFloat(P("#project_budget_minimum").val());var t=parseFloat(P("#project_budget_maximum").val());if(e>=t&&!isNaN(e)&&!isNaN(t)){alert("Minimum Price cannot be greater than Maximum Price.");P("#project_budget_minimum").val(t-1)}},1e3)});P.validator.setDefaults({ignore:":hidden:not(select)"});M.validate({ignore:[],rules:{project_title:{required:true},project_categories:{required:true},project_des:{required:true},project_career:{required:true},project_language:{required:true}},messages:{project_title:s,project_des:d,project_career:u,project_language:p,project_categories:m},submitHandler:function(e){l()},errorPlacement:function(e,t){e.insertAfter(t)},invalidHandler:function(){if(P(".error:visible").length>0){P("html, body").animate({scrollTop:P(".error:visible").offset().top-100},500)}}});function l(){var e=M.find('input[name="project_form"]').val(),t=M.find('input[name="project_id"]').val(),i=M.find('input[name="project_title"]').val(),a=M.find('select[name="project_categories"]').val(),n=M.find('select[name="project_skills"]').val(),r=tinymce.get("project_des").getContent(),o=M.find('select[name="project_language"]').val(),c=M.find('select[name="project_career"]').val(),l=M.find('select[name="project_location"]').val(),s=M.find('input[name="felan_map_address"]').val(),d=M.find('input[name="felan_map_location"]').val(),u=M.find('input[name="felan_latitude"]').val(),p=M.find('input[name="felan_longtitude"]').val(),m=M.find('input[name="project_thumbnail_url"]').val(),f=M.find('input[name="project_thumbnail_id"]').val(),_=M.find('input[name="felan_gallery_ids[]"]').map(function(){return P(this).val()}).get(),v=M.find('input[name="project_video_url"]').val(),j=M.find('select[name="project_budget_show"]').val(),g=M.find('input[name="project_budget_minimum"]').val(),h=M.find('input[name="project_budget_maximum"]').val(),b=M.find('input[name="project_value_rate"]').val(),y=M.find('select[name="project_budget_rate"]').val(),w=M.find('input[name="project_maximum_hours"]').val(),x=M.find('select[name="project_select_company"]').val(),k=M.find('input[name="project_faq_title[]"]').map(function(){return P(this).val()}).get(),q=M.find('textarea[name="project_faq_description[]"]').map(function(){return P(this).val()}).get(),C=M.find('input[name="company_title"]').val(),I=M.find('input[name="company_email"]').val(),N=M.find('input[name="company_avatar_url"]').val(),T=M.find('input[name="company_avatar_id"]').val();var z={};P("#project-submit-additional").each(function(){P.each(A,function(e,t){var i=P(".form-control[name="+t.id+"]").val();if(t.type=="radio"){i=P("input[name="+t.id+"]:checked").val()}if(t.type=="checkbox_list"){var a=[];P('input[name="'+t.id+'[]"]:checked').each(function(){a.push(P(this).val())});i=a}if(t.type=="image"){i=P("input#custom_image_id_"+t.id).val()}z[t.id]=i})});P.ajax({dataType:"json",url:F,data:{action:"project_submit_ajax",project_form:e,project_id:t,project_title:i,project_categories:a,project_skills:n,project_des:r,project_language:o,project_career:c,project_location:l,project_map_address:s,project_map_location:d,project_latitude:u,project_longtitude:p,project_thumbnail_url:m,project_thumbnail_id:f,felan_gallery_ids:_,project_video_url:v,project_budget_show:j,project_budget_minimum:g,project_budget_maximum:h,project_value_rate:b,project_budget_rate:y,project_maximum_hours:w,project_select_company:x,project_faq_title:k,project_faq_description:q,custom_field_project:z,company_title:C,company_email:I,company_avatar_url:N,company_avatar_id:T},beforeSend:function(){P(".btn-submit-project .btn-loading").fadeIn()},success:function(e){P(".btn-submit-project .btn-loading").fadeOut();if(e.success===true){window.location.href=H}}})}})})(jQuery);