var FELAN_STRIPE=FELAN_STRIPE||{};(function(o){"use strict";FELAN_STRIPE={init:function(){this.setupForm()},setupForm:function(){var e=this,a=o(".felan-project-stripe-form");if(a.length===0)return;var n=a.attr("id");var t=felan_stripe_vars[n];var i=null;var p=a.find(".felan-stripe-button");if(p.length){i=StripeCheckout.configure({key:t.key,locale:"auto",token:function(e,n){o("<input>").attr({type:"hidden",name:"stripeToken",value:e.id}).appendTo(a);o("<input>").attr({type:"hidden",name:"stripeTokenType",value:e.type}).appendTo(a);if(e.email){o("<input>").attr({type:"hidden",name:"stripeEmail",value:e.email}).appendTo(a)}a.submit()}});p.on("click",function(e){e.preventDefault();i.open(t.params)})}window.addEventListener("popstate",function(){if(i!=null){i.close()}})}};o(document).ready(function(){FELAN_STRIPE.init();var e=function(e){if(e=="undefined"||e==""||e==null){e=loading_text}var n=wp.template("felan-processing-template");o("body").append(n({ico:"fa fa-spinner fa-spin",text:e}))};if(typeof felan_payment_vars!=="undefined"){var n=felan_template_vars.ajax_url;o("#felan_payment_project").on("click",function(e){var n=o("input[name='felan_payment_method']:checked").val();var a=o(".payment-wrap").find("input[name='project_id']").val();if(n=="paypal"){t(a)}else if(n=="stripe"){o("#felan_stripe_project_addons button").trigger("click")}else if(n=="wire_transfer"){i(a)}else if(n=="woocheckout"){p(a)}});var t=function(e){o.ajax({type:"POST",url:n,data:{action:"felan_paypal_payment_project_addons",project_id:e,felan_project_security_payment:o("#felan_project_security_payment").val(),total_price:o(".package-project").find('input[name="total_price"]').val()},beforeSend:function(){o("#felan_payment_project").append('<div class="felan-loading-effect"><span class="felan-dual-ring"></span></div>')},success:function(e){window.location.href=e}})};var i=function(e){o.ajax({type:"POST",url:n,data:{action:"felan_wire_transfer_project_addons",project_id:e,felan_project_security_payment:o("#felan_project_security_payment").val(),total_price:o(".package-project").find('input[name="total_price"]').val()},beforeSend:function(){o("#felan_payment_project").append('<div class="felan-loading-effect"><span class="felan-dual-ring"></span></div>')},success:function(e){window.location.href=e}})};var p=function(e){o.ajax({type:"POST",url:n,data:{action:"felan_woocommerce_payment_project_addons",project_id:e,felan_project_security_payment:o("#felan_project_security_payment").val(),total_price:o(".package-project").find('input[name="total_price"]').val()},beforeSend:function(){o("#felan_payment_project").append('<div class="felan-loading-effect"><span class="felan-dual-ring"></span></div>')},success:function(e){window.location.href=e}})}}})})(jQuery);