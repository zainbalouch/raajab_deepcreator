(function(t,n){if(typeof define==="function"&&define.amd){define(["jquery"],function(e){return n(t,e)})}else if(typeof module==="object"&&typeof module.exports==="object"){module.exports=n(t,require("jquery"))}else{t.lity=n(t,t.jQuery||t.Zepto)}})(typeof window!=="undefined"?window:this,function(e,f){"use strict";var c=e.document;var n=f(e);var v=f.Deferred;var i=f("html");var r=[];var y="aria-hidden";var a="lity-"+y;var o='a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,[contenteditable],[tabindex]:not([tabindex^="-"])';var p={esc:true,handler:null,handlers:{image:k,inline:E,youtube:j,vimeo:D,googlemaps:T,facebookvideo:z,iframe:O},template:'<div class="lity" role="dialog" aria-label="Dialog Window (Press escape to close)" tabindex="-1"><div class="lity-wrap" data-lity-close role="document"><div class="lity-loader" aria-hidden="true">Loading...</div><div class="lity-container"><div class="lity-content"></div><button class="lity-close" type="button" aria-label="Close (Press escape to close)" data-lity-close>&times;</button></div></div></div>'};var t=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i;var l=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i;var s=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/;var d=/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i;var u=/(facebook\.com)\/([a-z0-9_-]*)\/videos\/([0-9]*)(.*)?$/i;var m=function(){var e=c.createElement("div");var t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t){if(e.style[n]!==undefined){return t[n]}}return false}();function h(e){var t=v();if(!m||!e.length){t.resolve()}else{e.one(m,t.resolve);setTimeout(t.resolve,500)}return t.promise()}function g(e,t,n){if(arguments.length===1){return f.extend({},e)}if(typeof t==="string"){if(typeof n==="undefined"){return typeof e[t]==="undefined"?null:e[t]}e[t]=n}else{f.extend(e,t)}return this}function b(e){var t=decodeURI(e.split("#")[0]).split("&");var n={},i;for(var r=0,a=t.length;r<a;r++){if(!t[r]){continue}i=t[r].split("=");n[i[0]]=i[1]}return n}function w(e,t){return e+(e.indexOf("?")>-1?"&":"?")+f.param(t)}function x(e,t){var n=e.indexOf("#");if(-1===n){return t}if(n>0){e=e.substr(n)}return t+e}function C(e){return f('<span class="lity-error"/>').append(e)}function k(e,t){var n=t.opener()&&t.opener().data("lity-desc")||"Image with no description";var i=f('<img src="'+e+'" alt="'+n+'"/>');var r=v();var a=function(){r.reject(C("Failed loading image"))};i.on("load",function(){if(this.naturalWidth===0){return a()}r.resolve(i)}).on("error",a);return r.promise()}k.test=function(e){return t.test(e)};function E(e,t){var n,i,r;try{n=f(e)}catch(e){return false}if(!n.length){return false}i=f('<i style="display:none !important"/>');r=n.hasClass("lity-hide");t.element().one("lity:remove",function(){i.before(n).remove();if(r&&!n.closest(".lity-content").length){n.addClass("lity-hide")}});return n.removeClass("lity-hide").after(i)}function j(e){var t=l.exec(e);if(!t){return false}return O(x(e,w("https://www.youtube"+(t[2]||"")+".com/embed/"+t[4],f.extend({autoplay:1},b(t[5]||"")))))}function D(e){var t=s.exec(e);if(!t){return false}return O(x(e,w("https://player.vimeo.com/video/"+t[3],f.extend({autoplay:1},b(t[4]||"")))))}function z(e){var t=u.exec(e);if(!t){return false}if(0!==e.indexOf("http")){e="https:"+e}return O(x(e,w("https://www.facebook.com/plugins/video.php?href="+e,f.extend({autoplay:1},b(t[4]||"")))))}function T(e){var t=d.exec(e);if(!t){return false}return O(x(e,w("https://www.google."+t[3]+"/maps?"+t[6],{output:t[6].indexOf("layer=c")>0?"svembed":"embed"})))}function O(e){return'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen allow="autoplay; fullscreen" src="'+e+'"/></div>'}function q(){return c.documentElement.clientHeight?c.documentElement.clientHeight:Math.round(n.height())}function W(e){var t=I();if(!t){return}if(e.keyCode===27&&!!t.options("esc")){t.close()}if(e.keyCode===9){$(e,t)}}function $(e,t){var n=t.element().find(o);var i=n.index(c.activeElement);if(e.shiftKey&&i<=0){n.get(n.length-1).focus();e.preventDefault()}else if(!e.shiftKey&&i===n.length-1){n.get(0).focus();e.preventDefault()}}function H(){f.each(r,function(e,t){t.resize()})}function M(e){if(1===r.unshift(e)){i.addClass("lity-active");n.on({resize:H,keydown:W})}f("body > *").not(e.element()).addClass("lity-hidden").each(function(){var e=f(this);if(undefined!==e.data(a)){return}e.data(a,e.attr(y)||null)}).attr(y,"true")}function P(t){var e;t.element().attr(y,"true");if(1===r.length){i.removeClass("lity-active");n.off({resize:H,keydown:W})}r=f.grep(r,function(e){return t!==e});if(!!r.length){e=r[0].element()}else{e=f(".lity-hidden")}e.removeClass("lity-hidden").each(function(){var e=f(this),t=e.data(a);if(!t){e.removeAttr(y)}else{e.attr(y,t)}e.removeData(a)})}function I(){if(0===r.length){return null}return r[0]}function A(n,i,r,e){var a="inline",o;var l=f.extend({},r);if(e&&l[e]){o=l[e](n,i);a=e}else{f.each(["inline","iframe"],function(e,t){delete l[t];l[t]=r[t]});f.each(l,function(e,t){if(!t){return true}if(t.test&&!t.test(n,i)){return true}o=t(n,i);if(false!==o){a=e;return false}})}return{handler:a,content:o||""}}function F(e,t,n,i){var r=this;var a;var o=false;var l=false;var s;var d;t=f.extend({},p,t);s=f(t.template);r.element=function(){return s};r.opener=function(){return n};r.options=f.proxy(g,r,t);r.handlers=f.proxy(g,r,t.handlers);r.resize=function(){if(!o||l){return}d.css("max-height",q()+"px").trigger("lity:resize",[r])};r.close=function(){if(!o||l){return}l=true;P(r);var e=v();if(i&&(c.activeElement===s[0]||f.contains(s[0],c.activeElement))){try{i.focus()}catch(e){}}d.trigger("lity:close",[r]);s.removeClass("lity-opened").addClass("lity-closed");h(d.add(s)).always(function(){d.trigger("lity:remove",[r]);s.remove();s=undefined;e.resolve()});return e.promise()};a=A(e,r,t.handlers,t.handler);s.attr(y,"false").addClass("lity-loading lity-opened lity-"+a.handler).appendTo("body").focus().on("click","[data-lity-close]",function(e){if(f(e.target).is("[data-lity-close]")){r.close()}}).trigger("lity:open",[r]);M(r);f.when(a.content).always(u);function u(e){d=f(e).css("max-height",q()+"px");s.find(".lity-loader").each(function(){var e=f(this);h(e).always(function(){e.remove()})});s.removeClass("lity-loading").find(".lity-content").empty().append(d);o=true;d.trigger("lity:ready",[r])}}function K(e,t,n){if(!e.preventDefault){n=f(n)}else{e.preventDefault();n=f(this);e=n.data("lity-target")||n.attr("href")||n.attr("src")}var i=new F(e,f.extend({},n.data("lity-options")||n.data("lity"),t),n,c.activeElement);if(!e.preventDefault){return i}}K.version="2.4.0";K.options=f.proxy(g,K,p);K.handlers=f.proxy(g,K,p.handlers);K.current=I;f(c).on("click.lity","[data-lity]",K);return K});