!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.ES6Promise=e()}(this,function(){"use strict";function r(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function c(t){return"function"==typeof t}function t(t){S=t}function e(t){j=t}function n(){return function(){return process.nextTick(s)}}function o(){return"undefined"!=typeof A?function(){A(s)}:i()}function D(){var t=0,e=new M(s),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}function K(){var t=new MessageChannel;return t.port1.onmessage=s,function(){return t.port2.postMessage(0)}}function i(){var t=setTimeout;return function(){return t(s,1)}}function s(){for(var t=0;t<g;t+=2){var e=P[t],n=P[t+1];e(n),P[t]=void 0,P[t+1]=void 0}g=0}function L(){try{var t=Function("return this")().require("vertx");return A=t.runOnLoop||t.runOnContext,o()}catch(t){return i()}}function a(t,e){var n=this,r=new this.constructor(l);void 0===r[C]&&m(r);var o=n._state;if(o){var i=arguments[o-1];j(function(){return y(o,r,i,n._result)})}else u(n,r,t,e);return r}function f(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var n=new e(l);return v(n,t),n}function l(){}function N(){return new TypeError("You cannot resolve a promise with itself")}function U(){return new TypeError("A promises callback cannot return that same promise.")}function W(t,e,n,r){try{t.call(e,n,r)}catch(t){return t}}function z(t,r,o){j(function(e){var n=!1,t=W(o,r,function(t){n||(n=!0,r!==t?v(e,t):p(e,t))},function(t){n||(n=!0,d(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&t&&(n=!0,d(e,t))},t)}function B(e,t){t._state===k?p(e,t._result):t._state===F?d(e,t._result):u(t,void 0,function(t){return v(e,t)},function(t){return d(e,t)})}function h(t,e,n){e.constructor===t.constructor&&n===a&&e.constructor.resolve===f?B(t,e):void 0===n?p(t,e):c(n)?z(t,e,n):p(t,e)}function v(e,t){if(e===t)d(e,N());else if(r(t)){var n=void 0;try{n=t.then}catch(t){return void d(e,t)}h(e,t,n)}else p(e,t)}function G(t){t._onerror&&t._onerror(t._result),_(t)}function p(t,e){t._state===O&&(t._result=e,t._state=k,0!==t._subscribers.length&&j(_,t))}function d(t,e){t._state===O&&(t._state=F,t._result=e,j(G,t))}function u(t,e,n,r){var o=t._subscribers,i=o.length;t._onerror=null,o[i]=e,o[i+k]=n,o[i+F]=r,0===i&&t._state&&j(_,t)}function _(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r=void 0,o=void 0,i=t._result,s=0;s<e.length;s+=3)r=e[s],o=e[s+n],r?y(n,r,o,i):o(i);t._subscribers.length=0}}function y(t,e,n,r){var o=c(n),i=void 0,s=void 0,u=!0;if(o){try{i=n(r)}catch(t){u=!1,s=t}if(e===i)return void d(e,U())}else i=r;e._state!==O||(o&&u?v(e,i):u===!1?d(e,s):t===k?p(e,i):t===F&&d(e,i))}function H(e,t){try{t(function(t){v(e,t)},function(t){d(e,t)})}catch(t){d(e,t)}}function I(){return Y++}function m(t){t[C]=Y++,t._state=void 0,t._result=void 0,t._subscribers=[]}function J(){return new Error("Array Methods must be provided an Array")}function Q(t){return new nt(this,t).promise}function R(o){var i=this;return new i(w(o)?function(t,e){for(var n=o.length,r=0;r<n;r++)i.resolve(o[r]).then(t,e)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function V(t){var e=this,n=new e(l);return d(n,t),n}function X(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Z(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function $(){var t=void 0;if("undefined"!=typeof global)t=global;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=q}var b=void 0;b=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var w=b,g=0,A=void 0,S=void 0,j=function(t,e){P[g]=t,P[g+1]=e,g+=2,2===g&&(S?S(s):x())},E="undefined"!=typeof window?window:void 0,T=E||{},M=T.MutationObserver||T.WebKitMutationObserver,tt="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),et="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,P=new Array(1e3),x=void 0;x=tt?n():M?D():et?K():void 0===E&&"function"==typeof require?L():i();var C=Math.random().toString(36).substring(2),O=void 0,k=1,F=2,Y=0,nt=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(l),this.promise[C]||m(this.promise),w(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?p(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&p(this.promise,this._result))):d(this.promise,J())}return t.prototype._enumerate=function(t){for(var e=0;this._state===O&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===f){var o=void 0,i=void 0,s=!1;try{o=e.then}catch(t){s=!0,i=t}if(o===a&&e._state!==O)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===q){var u=new n(l);s?d(u,i):h(u,e,o),this._willSettleAt(u,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},t.prototype._settledAt=function(t,e,n){var r=this.promise;r._state===O&&(this._remaining--,t===F?d(r,n):this._result[e]=n),0===this._remaining&&p(r,this._result)},t.prototype._willSettleAt=function(t,e){var n=this;u(t,void 0,function(t){return n._settledAt(k,e,t)},function(t){return n._settledAt(F,e,t)})},t}(),q=function(){function e(t){this[C]=I(),this._result=this._state=void 0,this._subscribers=[],l!==t&&("function"!=typeof t&&X(),this instanceof e?H(this,t):Z())}return e.prototype["catch"]=function(t){return this.then(null,t)},e.prototype["finally"]=function(e){var t=this,n=t.constructor;return c(e)?t.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})}):t.then(e,e)},e}();return q.prototype.then=a,q.all=Q,q.race=R,q.resolve=f,q.reject=V,q._setScheduler=t,q._setAsap=e,q._asap=j,q.polyfill=$,q.Promise=q,q});