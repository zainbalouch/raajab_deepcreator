var GLF_SorterClass=function(e){this.$container=e};(function(o){"use strict";GLF_SorterClass.prototype={init:function(){var e=this,t=this.$container.find(".glf-field-sorter-group");t.sortable({placeholder:"glf-sorter-sortable-placeholder",items:".glf-field-sorter-item",connectWith:o(".glf-field-sorter-group",this.$container),update:function(e,t){var i=o(e.target),a=i.data("group");i.find("[data-field-control]").each(function(){var e=o(this),t=e.attr("name");t=t.replace(/^(.*)(\[)([^\]]*)(\])(\[)([^\]]*)(\])*$/g,function(e,t,i,n,r,o,l,f){return t+i+a+r+o+l+f});e.prop("name",t)});var n=i.closest(".glf-field"),r=GLFFieldsConfig.fields.getValue(n);GLFFieldsConfig.required.checkRequired(n,r)}})}};var e={init:function(){var e=o(".glf-meta-config-wrapper");e=e.length?e:o("body");e.on("glf_make_template_done",function(){o(".glf-field-sorter-inner").each(function(){var e=new GLF_SorterClass(o(this));e.init()})});o(".glf-field.glf-field-sorter").on("glf_add_clone_field",function(e){var t=o(e.target).find(".glf-field-sorter-inner");if(t.length){var i=new GLF_SorterClass(t);i.init()}})}};o(document).ready(function(){e.init();GLFFieldsConfig.fieldInstance.push(e)})})(jQuery);