var GLF_SelectizeClass=function(e){this.$container=e};(function(n){"use strict";GLF_SelectizeClass.prototype={init:function(){var l=this,e=l.$container.find(".glf-selectize"),a=l.$container.find(".glf-selectize-edit-link"),o=l.$container.find(".glf-selectize-create-link"),i={plugins:["remove_button"],onChange:function(){var e=l.$container.closest(".glf-field"),i=GLFFieldsConfig.fields.getValue(e),t=e.find(".selectize-control");GLFFieldsConfig.required.checkRequired(e,i);if(a.length){if(t.find(".glf-selectize-edit-link").length==0){a.detach().appendTo(t)}if(i==""){a.hide()}else{a.show();var n=a.data("link")+"?post="+i+"&action=edit";a.attr("href",n)}}if(o.length){if(t.find(".glf-selectize-create-link").length==0){o.detach().appendTo(t)}}}};if(!e.attr("multiple")){if(e.data("allow-clear")){i.allowEmptyOption=true;i.onInitialize=this.addRemoveButton;i.onItemAdd=this.addRemoveButton;i.onItemRemove=this.addRemoveButton}}if(e.data("tags")){i.create=true;i.persist=false}if(e.data("drag")){i.plugins[1]="drag_drop"}var t=e.selectize(i);var n=t[0].selectize;var s=e.data("value");if(typeof s!=="undefined"){n.setValue(s)}},addRemoveButton:function(){if(this.getValue()!=""){if(this.$control.find(".selectize-remove").length==0){this.$control.append('<span class="selectize-remove dashicons dashicons dashicons-no-alt"></span>');var e=this;n(".selectize-remove",this.$control).on("click",function(){e.setValue("")})}}else{n(".selectize-remove",this.$control).remove()}}};var e={init:function(){var e=n(".glf-meta-config-wrapper");e=e.length?e:n("body");e.on("glf_make_template_done",function(){n(".glf-field-selectize-inner").each(function(){var e=new GLF_SelectizeClass(n(this));e.init()})});n(".glf-field.glf-field-selectize").on("glf_add_clone_field",function(e){var i=n(e.target).find(".glf-field-selectize-inner");if(i.length){var t=new GLF_SelectizeClass(i);t.init()}})}};n(document).ready(function(){e.init();GLFFieldsConfig.fieldInstance.push(e)})})(jQuery);