var GLF_EditorClass=function(t){this.$container=t};(function(e){"use strict";GLF_EditorClass.prototype={init:function(){this.initEditor();this.onChangeWPEditorArea()},initEditor:function(){var t=this.$container.find(".wp-editor-area"),i=t.attr("name"),n=i.replace(/[\[\]]/g,"__")+"__editor",e=t.attr("id");this.$container.find(".wp-editor-wrap").attr("id","wp-"+n+"-wrap").removeClass("html-active").addClass("tmce-active").find(".wp-editor-tools").attr("id","wp-"+n+"-editor-tools").find(".wp-media-buttons").attr("id","wp-"+n+"-media-buttons").find(".insert-media").data("editor",n);this.$container.find(".switch-tmce").attr("id",n+"-tmce").data("wp-editor-id",n).attr("data-wp-editor-id",n).end().find(".switch-html").attr("id",n+"-html").data("wp-editor-id",n).attr("data-wp-editor-id",n);this.$container.find(".wp-editor-container").attr("id","wp-"+n+"-editor-container").find(".quicktags-toolbar").attr("id","qt_"+n+"_toolbar").html("");this.$container.find(".wp-editor-container").find(".wp-editor-area").attr("id",n).val("");if(e in tinyMCEPreInit.mceInit){var r=JSON.parse(JSON.stringify(tinyMCEPreInit.mceInit[e]));r["body_class"]=r["body_class"].replace(e,n);r["selector"]=r["selector"].replace(e,n);tinymce.execCommand("mceRemoveEditor",false,n);tinymce.init(r)}if(e in tinyMCEPreInit.qtInit){var a=JSON.parse(JSON.stringify(tinyMCEPreInit.qtInit[e]));quicktags({id:n,buttons:a["buttons"]});QTags._buttonsInit()}},onChangeWPEditorArea:function(){this.$container.find(".wp-editor-area").on("change",function(){var t=e(this).closest(".glf-field");t.trigger("glf_field_change")})}};var i={init:function(){e(".glf-field.glf-field-editor").on("glf_add_clone_field",function(t){var i=e(t.target).find(".glf-field-editor-inner");if(i.length){var n=new GLF_EditorClass(i);n.init()}});setTimeout(function(){if(typeof tinymce!=="undefined"){for(var t=0;t<tinymce.editors.length;t++){i.editorChange(t)}}},1e3)},editorChange:function(t){tinymce.editors[t].on("change",function(t){var i=e(t.target.contentAreaContainer).closest(".glf-field");i.trigger("glf_field_change")})}};e(document).ready(function(){i.init();GLFFieldsConfig.fieldInstance.push(i)})})(jQuery);