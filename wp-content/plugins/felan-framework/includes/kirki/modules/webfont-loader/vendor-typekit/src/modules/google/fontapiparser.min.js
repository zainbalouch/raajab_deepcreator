goog.provide("webfont.modules.google.FontApiParser");goog.require("webfont.Font");webfont.modules.google.FontApiParser=function(t){this.fontFamilies_=t;this.parsedFonts_=[];this.fontTestStrings_={}};webfont.modules.google.FontApiParser.INT_FONTS={latin:webfont.FontWatchRunner.DEFAULT_TEST_STRING,"latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"};webfont.modules.google.FontApiParser.WEIGHTS={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"};webfont.modules.google.FontApiParser.STYLES={i:"i",italic:"i",n:"n",normal:"n"};webfont.modules.google.FontApiParser.VARIATION_MATCH=new RegExp("^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|"+"(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i"+"|normal|italic)?$");goog.scope(function(){var g=webfont.modules.google.FontApiParser,f=webfont.Font;g.prototype.parse=function(){var t=this.fontFamilies_.length;for(var e=0;e<t;e++){var r=this.fontFamilies_[e].split(":");var o=r[0].replace(/\+/g," ");var n=["n4"];if(r.length>=2){var i=this.parseVariations_(r[1]);if(i.length>0){n=i}if(r.length==3){var a=this.parseSubsets_(r[2]);if(a.length>0){var s=g.INT_FONTS[a[0]];if(s){this.fontTestStrings_[o]=s}}}}if(!this.fontTestStrings_[o]){var l=g.INT_FONTS[o];if(l){this.fontTestStrings_[o]=l}}for(var u=0;u<n.length;u+=1){this.parsedFonts_.push(new f(o,n[u]))}}};g.prototype.generateFontVariationDescription_=function(t){if(!t.match(/^[\w-]+$/)){return""}var e=t.toLowerCase();var r=g.VARIATION_MATCH.exec(e);if(r==null){return""}var o=this.normalizeStyle_(r[2]);var n=this.normalizeWeight_(r[1]);return[o,n].join("")};g.prototype.normalizeStyle_=function(t){if(t==null||t==""){return"n"}return g.STYLES[t]};g.prototype.normalizeWeight_=function(t){if(t==null||t==""){return"4"}var e=g.WEIGHTS[t];if(e){return e}if(isNaN(t)){return"4"}return t.substr(0,1)};g.prototype.parseVariations_=function(t){var e=[];if(!t){return e}var r=t.split(",");var o=r.length;for(var n=0;n<o;n++){var i=r[n];var a=this.generateFontVariationDescription_(i);if(a){e.push(a)}}return e};g.prototype.parseSubsets_=function(t){var e=[];if(!t){return e}return t.split(",")};g.prototype.getFonts=function(){return this.parsedFonts_};g.prototype.getFontTestStrings=function(){return this.fontTestStrings_}});