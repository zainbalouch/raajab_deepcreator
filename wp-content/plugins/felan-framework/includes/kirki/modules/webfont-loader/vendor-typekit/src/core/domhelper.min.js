goog.provide("webfont.DomHelper");webfont.DomHelper=function(e,t){this.mainWindow_=e;this.loadWindow_=t||e;this.protocol_;this.document_=this.loadWindow_.document};goog.scope(function(){var c=webfont.DomHelper;c.CAN_WAIT_STYLESHEET=!!window["FontFace"];c.prototype.createElement=function(e,t,n){var o=this.document_.createElement(e);if(t){for(var r in t){if(t.hasOwnProperty(r)){if(r=="style"){this.setStyle(o,t[r])}else{o.setAttribute(r,t[r])}}}}if(n){o.appendChild(this.document_.createTextNode(n))}return o};c.prototype.insertInto=function(e,t){var n=this.document_.getElementsByTagName(e)[0];if(!n){n=document.documentElement}n.insertBefore(t,n.lastChild);return true};c.prototype.whenBodyExists=function(e){var t=this;if(t.document_.body){e()}else{if(t.document_.addEventListener){t.document_.addEventListener("DOMContentLoaded",e)}else{t.document_.attachEvent("onreadystatechange",function(){if(t.document_.readyState=="interactive"||t.document_.readyState=="complete"){e()}})}}};c.prototype.removeElement=function(e){if(e.parentNode){e.parentNode.removeChild(e);return true}return false};c.prototype.appendClassName=function(e,t){this.updateClassName(e,[t])};c.prototype.removeClassName=function(e,t){this.updateClassName(e,null,[t])};c.prototype.updateClassName=function(e,t,n){var o=t||[],r=n||[];var a=e.className.split(/\s+/);for(var i=0;i<o.length;i+=1){var s=false;for(var l=0;l<a.length;l+=1){if(o[i]===a[l]){s=true;break}}if(!s){a.push(o[i])}}var u=[];for(var i=0;i<a.length;i+=1){var s=false;for(var l=0;l<r.length;l+=1){if(a[i]===r[l]){s=true;break}}if(!s){u.push(a[i])}}e.className=u.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")};c.prototype.hasClassName=function(e,t){var n=e.className.split(/\s+/);for(var o=0,r=n.length;o<r;o++){if(n[o]==t){return true}}return false};c.prototype.setStyle=function(e,t){e.style.cssText=t};c.prototype.getMainWindow=function(){return this.mainWindow_};c.prototype.getLoadWindow=function(){return this.loadWindow_};c.prototype.getHostName=function(){return this.getLoadWindow().location.hostname||this.getMainWindow().location.hostname};c.prototype.createStyle=function(e){var t=this.createElement("style");t.setAttribute("type","text/css");if(t.styleSheet){t.styleSheet.cssText=e}else{t.appendChild(document.createTextNode(e))}return t};c.prototype.loadStylesheet=function(o,e,t){var n=this.createElement("link",{rel:"stylesheet",href:o,media:t?"only x":"all"});var r=this.document_.styleSheets,a=false,i=!t,s=null,l=e||null;function u(){if(l&&a&&i){l(s);l=null}}if(c.CAN_WAIT_STYLESHEET){n.onload=function(){a=true;u()};n.onerror=function(){a=true;s=new Error("Stylesheet failed to load");u()}}else{setTimeout(function(){a=true;u()},0)}function d(e){for(var t=0;t<r.length;t++){if(r[t].href&&r[t].href.indexOf(o)!==-1){return e()}}setTimeout(function(){d(e)},0)}function f(e){for(var t=0;t<r.length;t++){if(r[t].href&&r[t].href.indexOf(o)!==-1&&r[t].media){var n=r[t].media;if(n==="all"||n.mediaText&&n.mediaText==="all"){return e()}}}setTimeout(function(){f(e)},0)}this.insertInto("head",n);if(t){d(function(){n.media="all";f(function(){i=true;u()})})}return n};c.prototype.loadScript=function(e,t,n){var o=this.document_.getElementsByTagName("head")[0];if(o){var r=this.createElement("script",{src:e});var a=false;r.onload=r.onreadystatechange=function(){if(!a&&(!this.readyState||this.readyState=="loaded"||this.readyState=="complete")){a=true;if(t){t(null)}r.onload=r.onreadystatechange=null;if(r.parentNode.tagName=="HEAD")o.removeChild(r)}};o.appendChild(r);setTimeout(function(){if(!a){a=true;if(t){t(new Error("Script load timeout"))}}},n||5e3);return r}return null}});