var kirkiPostMessage={fields:{},styleTag:{add:function(e){if(null===document.getElementById("kirki-postmessage-"+e)||"undefined"===typeof document.getElementById("kirki-postmessage-"+e)){jQuery("head").append('<style id="kirki-postmessage-'+e+'"></style>')}},addData:function(e,i){kirkiPostMessage.styleTag.add(e);jQuery("#kirki-postmessage-"+e).text(i)}},util:{processValue:function(t,a){var s=this,r=window.parent.wp.customize.get(),i=false;if("object"===typeof a){_.each(a,function(e,i){a[i]=s.processValue(t,e)});return a}t=_.defaults(t,{prefix:"",units:"",suffix:"",value_pattern:"$",pattern_replace:{},exclude:[]});if(1<=t.exclude.length){_.each(t.exclude,function(e){if(a==e){i=true}})}if(i){return false}a=t.value_pattern.replace(new RegExp("\\$","g"),a);_.each(t.pattern_replace,function(e,i){if(!_.isUndefined(r[e])){a=a.replace(i,r[e])}});return t.prefix+a+t.units+t.suffix},backgroundImageValue:function(e){return-1===e.indexOf("url(")?"url("+e+")":e}},css:{fromOutput:function(t,e,i){var a="",s=window.parent.kirki,r="",n=false,l;if(t.js_callback&&"function"===typeof window[t.js_callback]){e=window[t.js_callback[0]](e,t.js_callback[1])}switch(i){case"kirki-typography":a+=t.element+"{";_.each(e,function(e,i){if(t.choice&&i!==t.choice){return}l=kirkiPostMessage.util.processValue(t,e);if(false!==l){a+=i+":"+l+";"}});a+="}";if(!_.isUndefined(WebFont)&&e["font-family"]&&"google"===s.util.webfonts.getFontType(e["font-family"])){r=e["font-family"].replace(/\"/g,"&quot;");if(e.variant){if("regular"===e.variant){r+=":400"}else if("italic"===e.variant){r+=":400i"}else{r+=":"+e.variant}}r+=":cyrillic,cyrillic-ext,devanagari,greek,greek-ext,khmer,latin,latin-ext,vietnamese,hebrew,arabic,bengali,gujarati,tamil,telugu,thai";WebFont.load({google:{families:[r]}})}break;case"kirki-background":case"kirki-dimensions":case"kirki-multicolor":case"kirki-sortable":a+=t.element+"{";_.each(e,function(e,i){if(t.choice&&i!==t.choice){return}if("background-image"===i){e=kirkiPostMessage.util.backgroundImageValue(e)}l=kirkiPostMessage.util.processValue(t,e);if(false!==l){if(t.property){a+=t.property;if(""!==t.property&&("top"===i||"bottom"===i||"left"===i||"right"===i)){a+="-"+i}a+=":"+l+";"}else{a+=i+":"+l+";"}}});a+="}";break;default:if("kirki-image"===i){e=!_.isUndefined(e.url)?kirkiPostMessage.util.backgroundImageValue(e.url):kirkiPostMessage.util.backgroundImageValue(e)}if(_.isObject(e)){a+=t.element+"{";_.each(e,function(e,i){if(t.choice&&i!==t.choice){return}l=kirkiPostMessage.util.processValue(t,e);if(!t.property){t.property=i}if(false!==l){a+=t.property+":"+l+";"}});a+="}"}else{l=kirkiPostMessage.util.processValue(t,e);if(false!==l){a+=t.element+"{"+t.property+":"+l+";}"}}break}if(t.media_query&&"string"===typeof t.media_query&&!_.isEmpty(t.media_query)){n=t.media_query;if(-1===n.indexOf("@media")){n="@media "+n}}if(n){return n+"{"+a+"}"}return a}},html:{fromOutput:function(t,a){if(t.js_callback&&"function"===typeof window[t.js_callback]){a=window[t.js_callback[0]](a,t.js_callback[1])}if(_.isObject(a)||_.isArray(a)){if(!t.choice){return}_.each(a,function(e,i){if(t.choice&&i!==t.choice){return}a=e})}a=kirkiPostMessage.util.processValue(t,a);if(t.attr){jQuery(t.element).attr(t.attr,a)}else{jQuery(t.element).html(a)}}},toggleClass:{fromOutput:function(e,i){if("undefined"===typeof e.class||"undefined"===typeof e.value){return}if(i===e.value&&!jQuery(e.element).hasClass(e.class)){jQuery(e.element).addClass(e.class)}else{jQuery(e.element).removeClass(e.class)}}}};jQuery(document).ready(function(){_.each(kirkiPostMessageFields,function(a){wp.customize(a.settings,function(e){e.bind(function(i){var t="";_.each(a.js_vars,function(e){if(!e.function||"undefined"===typeof kirkiPostMessage[e.function]){e.function="css"}if("css"===e.function){t+=kirkiPostMessage.css.fromOutput(e,i,a.type)}else{kirkiPostMessage[e.function].fromOutput(e,i,a.type)}});kirkiPostMessage.styleTag.addData(a.settings,t)})})})});