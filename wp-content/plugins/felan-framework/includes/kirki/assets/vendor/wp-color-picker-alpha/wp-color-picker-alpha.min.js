(function(p){var c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAAHnlligAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHJJREFUeNpi+P///4EDBxiAGMgCCCAGFB5AADGCRBgYDh48CCRZIJS9vT2QBAggFBkmBiSAogxFBiCAoHogAKIKAlBUYTELAiAmEtABEECk20G6BOmuIl0CIMBQ/IEMkO0myiSSraaaBhZcbkUOs0HuBwDplz5uFJ3Z4gAAAABJRU5ErkJggg==",i='<button type="button" class="button wp-color-result" aria-expanded="false"><span class="wp-color-result-text"></span></button>',o='<div class="wp-picker-holder" />',a='<div class="wp-picker-container" />',r='<input type="button" class="button button-small" />',l="<label></label>",s='<span class="screen-reader-text"></span>',n=wp.i18n.__;Color.fn.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var t=parseInt(this._color,10).toString(16);if(this.error)return"";if(t.length<6)t=("00000"+t).substr(-6);return"#"+t};p.widget("wp.wpColorPicker",p.wp.wpColorPicker,{_create:function(){if(!p.support.iris){return}var e=this,t=e.element;p.extend(e.options,t.data());if(e.options.type==="hue"){return e._createHueOnly()}e.close=p.proxy(e.close,e);e.initialValue=t.val();t.addClass("wp-color-picker");if(!t.parent("label").length){t.wrap(l);e.wrappingLabelText=p(s).insertBefore(t).text(n("Color value"))}e.wrappingLabel=t.parent();e.wrappingLabel.wrap(a);e.wrap=e.wrappingLabel.parent();e.toggler=p(i).insertBefore(e.wrappingLabel).css({backgroundColor:e.initialValue});if(t.data("label")){e.toggler.find(".wp-color-result-text").text(t.data("label"))}else{e.toggler.find(".wp-color-result-text").text(n("Select Color"))}e.pickerContainer=p(o).insertAfter(e.wrappingLabel);e.button=p(r);if(e.options.defaultColor){e.button.addClass("wp-picker-default").val(n("Default")).attr("aria-label",n("Select default color"))}else{e.button.addClass("wp-picker-clear").val(n("Clear")).attr("aria-label",n("Clear color"))}e.wrappingLabel.wrap('<span class="wp-picker-input-wrap hidden" />').after(e.button);e.inputWrapper=t.closest(".wp-picker-input-wrap");t.iris({target:e.pickerContainer,hide:e.options.hide,width:e.options.width,mode:e.options.mode,palettes:e.options.palettes,change:function(t,i){if(e.options.alpha){e.toggler.css({"background-image":"url("+c+")",position:"relative"});if(e.toggler.find("span.color-alpha").length==0){e.toggler.append('<span class="color-alpha" />')}e.toggler.find("span.color-alpha").css({width:"30px","min-height":"100%",position:"absolute",top:0,left:0,"border-top-left-radius":"2px","border-bottom-left-radius":"2px",background:i.color.toString()})}else{e.toggler.css({backgroundColor:i.color.toString()})}if(p.isFunction(e.options.change)){e.options.change.call(this,t,i)}}});t.val(e.initialValue);e._addListeners();if(!e.options.hide){e.toggler.click()}},_addListeners:function(){var i=this;i.wrap.on("click.wpcolorpicker",function(t){t.stopPropagation()});i.toggler.click(function(){if(i.toggler.hasClass("wp-picker-open")){i.close()}else{i.open()}});i.element.on("change",function(t){if(p(this).val()===""||i.element.hasClass("iris-error")){if(i.options.alpha){i.toggler.find("span.color-alpha").css("backgroundColor","")}else{i.toggler.css("backgroundColor","")}if(p.isFunction(i.options.clear))i.options.clear.call(this,t)}});i.button.on("click",function(t){if(p(this).hasClass("wp-picker-clear")){i.element.val("");if(i.options.alpha){i.toggler.find("span.color-alpha").css("backgroundColor","")}else{i.toggler.css("backgroundColor","")}if(p.isFunction(i.options.clear))i.options.clear.call(this,t)}else if(p(this).hasClass("wp-picker-default")){i.element.val(i.options.defaultColor).change()}})}});p.widget("a8c.iris",p.a8c.iris,{_create:function(){this._super();this.options.alpha=this.element.data("alpha")||false;if(!this.element.is(":input"))this.options.alpha=false;if(typeof this.options.alpha!=="undefined"&&this.options.alpha){var e=this,t=e.element,i='<div class="iris-strip iris-slider iris-alpha-slider"><div class="iris-slider-offset iris-slider-offset-alpha"></div></div>',o=p(i).appendTo(e.picker.find(".iris-picker-inner")),a=o.find(".iris-slider-offset-alpha"),r={aContainer:o,aSlider:a};if(typeof t.data("custom-width")!=="undefined"){e.options.customWidth=parseInt(t.data("custom-width"))||0}else{e.options.customWidth=100}e.options.defaultWidth=t.width();if(e._color._alpha<1||e._color.toString().indexOf("rgb")!=-1)t.width(parseInt(e.options.defaultWidth+e.options.customWidth));p.each(r,function(t,i){e.controls[t]=i});e.controls.square.css({"margin-right":"0"});var l=e.picker.width()-e.controls.square.width()-20,s=l/6,n=l/2-s;p.each(["aContainer","strip"],function(t,i){e.controls[i].width(n).css({"margin-left":s+"px"})});e._initControls();e._change()}},_initControls:function(){this._super();if(this.options.alpha){var e=this,t=e.controls;t.aSlider.slider({orientation:"vertical",min:0,max:100,step:1,value:parseInt(e._color._alpha*100),slide:function(t,i){e._color._alpha=parseFloat(i.value/100);e._change.apply(e,arguments)}})}},_change:function(){this._super();var t=this,i=t.element;if(this.options.alpha){var e=t.controls,o=parseInt(t._color._alpha*100),a=t._color.toRgb(),r=["rgb("+a.r+","+a.g+","+a.b+") 0%","rgba("+a.r+","+a.g+","+a.b+", 0) 100%"],l=t.options.defaultWidth,s=t.options.customWidth,n=t.picker.closest(".wp-picker-container").find(".wp-color-result");e.aContainer.css({background:"linear-gradient(to bottom, "+r.join(", ")+"), url("+c+")"});if(n.hasClass("wp-picker-open")){e.aSlider.slider("value",o);if(t._color._alpha<1){e.strip.attr("style",e.strip.attr("style").replace(/rgba\(([0-9]+,)(\s+)?([0-9]+,)(\s+)?([0-9]+)(,(\s+)?[0-9\.]+)\)/g,"rgb($1$3$5)"));i.width(parseInt(l+s))}else{i.width(l)}}}var p=i.data("reset-alpha")||false;if(p){t.picker.find(".iris-palette-container").on("click.palette",".iris-palette",function(){t._color._alpha=1;t.active="external";t._change()})}},_addInputListeners:function(o){var a=this,t=100,i=function(t){var i=new Color(o.val()),e=o.val();o.removeClass("iris-error");if(i.error){if(e!=="")o.addClass("iris-error")}else{if(i.toString()!==a._color.toString()){if(!(t.type==="keyup"&&e.match(/^[0-9a-fA-F]{3}$/)))a._setOption("color",i.toString())}}};o.on("change",i).on("keyup",a._debounce(i,t));if(a.options.hide){o.on("focus",function(){a.show()})}}})})(jQuery);