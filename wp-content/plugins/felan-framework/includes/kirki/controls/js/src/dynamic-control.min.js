(function(){"use strict";wp.customize.kirkiDynamicControl=wp.customize.Control.extend({initialize:function(t,e){var i=this,n=e||{};n.params=n.params||{};if(!n.params.type){n.params.type="kirki-generic"}if(!n.params.content){n.params.content=jQuery("<li></li>");n.params.content.attr("id","customize-control-"+t.replace(/]/g,"").replace(/\[/g,"-"));n.params.content.attr("class","customize-control customize-control-"+n.params.type)}i.propertyElements=[];wp.customize.Control.prototype.initialize.call(i,t,n)},_setUpSettingRootLinks:function(){var n=this,t=n.container.find("[data-customize-setting-link]");t.each(function(){var i=jQuery(this);wp.customize(i.data("customizeSettingLink"),function(t){var e=new wp.customize.Element(i);n.elements.push(e);e.sync(t);e.set(t())})})},_setUpSettingPropertyLinks:function(){var n=this,t;if(!n.setting){return}t=n.container.find("[data-customize-setting-property-link]");t.each(function(){var t=jQuery(this),e,i=t.data("customizeSettingPropertyLink");e=new wp.customize.Element(t);n.propertyElements.push(e);e.set(n.setting()[i]);e.bind(function(t){var e=n.setting();if(t===e[i]){return}e=_.clone(e);e[i]=t;n.setting.set(e)});n.setting.bind(function(t){if(t[i]!==e.get()){e.set(t[i])}})})},ready:function(){var t=this;t._setUpSettingRootLinks();t._setUpSettingPropertyLinks();wp.customize.Control.prototype.ready.call(t);t.deferred.embedded.done(function(){t.initKirkiControl(t)})},embed:function(){var e=this,t=e.section();if(!t){return}wp.customize.section(t,function(t){if("kirki-expanded"===t.params.type||t.expanded()||wp.customize.settings.autofocus.control===e.id){e.actuallyEmbed()}else{t.expanded.bind(function(t){if(t){e.actuallyEmbed()}})}})},actuallyEmbed:function(){var t=this;if("resolved"===t.deferred.embedded.state()){return}t.renderContent();t.deferred.embedded.resolve()},focus:function(t){var e=this;e.actuallyEmbed();wp.customize.Control.prototype.focus.call(e,t)},initKirkiControl:function(t){if("undefined"!==typeof kirki.control[t.params.type]){kirki.control[t.params.type].init(t);return}this.container.on("change keyup paste click","input",function(){t.setting.set(jQuery(this).val())})}})})();_.each(kirki.control,function(t,e){wp.customize.controlConstructor[e]=wp.customize.kirkiDynamicControl.extend({})});